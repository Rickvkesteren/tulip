// ========================================
// Bollenstreek Direct - Translation System
// ========================================

const translations = {
    nl: {
        // Header
        home: "Home",
        webshop: "Webshop",
        ourGrowers: "Onze Kwekers",
        theBollenstreek: "De Bollenstreek",
        experiences: "Experiences",
        contact: "Contact",
        blog: "Blog",
        searchPlaceholder: "Zoek bollen...",
        
        // Hero
        heroTitle: "Nederlandse Bloembollen<br>Direct van de Kweker",
        heroSubtitle: "Ontdek de prachtige bloembollen uit de Bollenstreek. Wij verbinden u rechtstreeks met lokale kwekers voor de beste kwaliteit.",
        viewCollection: "Bekijk Collectie",
        meetGrowers: "Ontmoet de Kwekers",
        
        // Products
        addToCart: "In Winkelwagen",
        bulbs: "bollen",
        inStock: "Op voorraad",
        outOfStock: "Uitverkocht",
        perPiece: "per stuk",
        
        // Cart
        cart: "Winkelwagen",
        subtotal: "Subtotaal",
        shipping: "Verzending",
        total: "Totaal",
        checkout: "Afrekenen",
        freeShipping: "Gratis verzending vanaf â‚¬50",
        emptyCart: "Je winkelwagen is leeg",
        
        // Checkout
        deliveryAddress: "Bezorgadres",
        firstName: "Voornaam",
        lastName: "Achternaam",
        email: "E-mailadres",
        phone: "Telefoonnummer",
        street: "Straatnaam",
        houseNumber: "Huisnummer",
        postalCode: "Postcode",
        city: "Plaats",
        country: "Land",
        paymentMethod: "Betaalmethode",
        placeOrder: "Bestelling Plaatsen",
        
        // Shipping
        shippingNetherlands: "Nederland",
        shippingBelgium: "BelgiÃ«",
        shippingGermany: "Duitsland",
        shippingFrance: "Frankrijk",
        shippingEU: "Overig EU",
        shippingWorldwide: "Wereldwijd",
        freeFrom: "Gratis vanaf",
        deliveryDays: "werkdagen",
        
        // Footer
        footerAbout: "Nederlandse bloembollen rechtstreeks van lokale kwekers uit de Bollenstreek naar uw tuin.",
        allProducts: "Alle Producten",
        aboutUs: "Over Ons",
        
        // Blog
        blogTitle: "Blog & Planttips",
        blogSubtitle: "Tips, trucs en handleidingen voor het kweken van prachtige bloembollen",
        howToPlant: "Hoe plant ik",
        seasonCalendar: "Seizoenskalender",
        videoTutorials: "Video Tutorials",
        readMore: "Lees meer",
        
        // Map
        mapTitle: "Interactieve Kaart",
        filterGrowers: "Bloembollen Bedrijven",
        filterExperiences: "Uitjes & Experiences",
        filterPlaces: "Plaatsen",
        planRoute: "Plan Route",
        
        // Bloom status
        nowBlooming: "Nu in bloei",
        bestTimeToVisit: "Beste bezoektijd",
        bloomingPeriod: "Bloeiperiode",
        
        // General
        since: "Sinds",
        moreInfo: "Meer info",
        visitWebsite: "Bezoek Website",
        close: "Sluiten"
    },
    
    en: {
        // Header
        home: "Home",
        webshop: "Shop",
        ourGrowers: "Our Growers",
        theBollenstreek: "The Bulb Region",
        experiences: "Experiences",
        contact: "Contact",
        blog: "Blog",
        searchPlaceholder: "Search bulbs...",
        
        // Hero
        heroTitle: "Dutch Flower Bulbs<br>Direct from the Grower",
        heroSubtitle: "Discover beautiful flower bulbs from the Bollenstreek. We connect you directly with local growers for the best quality.",
        viewCollection: "View Collection",
        meetGrowers: "Meet the Growers",
        
        // Products
        addToCart: "Add to Cart",
        bulbs: "bulbs",
        inStock: "In stock",
        outOfStock: "Sold out",
        perPiece: "per piece",
        
        // Cart
        cart: "Shopping Cart",
        subtotal: "Subtotal",
        shipping: "Shipping",
        total: "Total",
        checkout: "Checkout",
        freeShipping: "Free shipping from â‚¬50",
        emptyCart: "Your cart is empty",
        
        // Checkout
        deliveryAddress: "Delivery Address",
        firstName: "First Name",
        lastName: "Last Name",
        email: "Email Address",
        phone: "Phone Number",
        street: "Street",
        houseNumber: "House Number",
        postalCode: "Postal Code",
        city: "City",
        country: "Country",
        paymentMethod: "Payment Method",
        placeOrder: "Place Order",
        
        // Shipping
        shippingNetherlands: "Netherlands",
        shippingBelgium: "Belgium",
        shippingGermany: "Germany",
        shippingFrance: "France",
        shippingEU: "Other EU",
        shippingWorldwide: "Worldwide",
        freeFrom: "Free from",
        deliveryDays: "business days",
        
        // Footer
        footerAbout: "Dutch flower bulbs directly from local growers in the Bollenstreek to your garden.",
        allProducts: "All Products",
        aboutUs: "About Us",
        
        // Blog
        blogTitle: "Blog & Planting Tips",
        blogSubtitle: "Tips, tricks and guides for growing beautiful flower bulbs",
        howToPlant: "How to plant",
        seasonCalendar: "Season Calendar",
        videoTutorials: "Video Tutorials",
        readMore: "Read more",
        
        // Map
        mapTitle: "Interactive Map",
        filterGrowers: "Bulb Growers",
        filterExperiences: "Activities & Experiences",
        filterPlaces: "Places",
        planRoute: "Plan Route",
        
        // Bloom status
        nowBlooming: "Now blooming",
        bestTimeToVisit: "Best time to visit",
        bloomingPeriod: "Blooming period",
        
        // General
        since: "Since",
        moreInfo: "More info",
        visitWebsite: "Visit Website",
        close: "Close"
    },
    
    de: {
        // Header
        home: "Startseite",
        webshop: "Shop",
        ourGrowers: "Unsere ZÃ¼chter",
        theBollenstreek: "Die Bollenstreek",
        experiences: "Erlebnisse",
        contact: "Kontakt",
        blog: "Blog",
        searchPlaceholder: "Blumenzwiebeln suchen...",
        
        // Hero
        heroTitle: "NiederlÃ¤ndische Blumenzwiebeln<br>Direkt vom ZÃ¼chter",
        heroSubtitle: "Entdecken Sie wunderschÃ¶ne Blumenzwiebeln aus der Bollenstreek. Wir verbinden Sie direkt mit lokalen ZÃ¼chtern fÃ¼r beste QualitÃ¤t.",
        viewCollection: "Kollektion ansehen",
        meetGrowers: "ZÃ¼chter kennenlernen",
        
        // Products
        addToCart: "In den Warenkorb",
        bulbs: "Zwiebeln",
        inStock: "Auf Lager",
        outOfStock: "Ausverkauft",
        perPiece: "pro StÃ¼ck",
        
        // Cart
        cart: "Warenkorb",
        subtotal: "Zwischensumme",
        shipping: "Versand",
        total: "Gesamt",
        checkout: "Zur Kasse",
        freeShipping: "Kostenloser Versand ab â‚¬50",
        emptyCart: "Ihr Warenkorb ist leer",
        
        // Checkout
        deliveryAddress: "Lieferadresse",
        firstName: "Vorname",
        lastName: "Nachname",
        email: "E-Mail-Adresse",
        phone: "Telefonnummer",
        street: "StraÃŸe",
        houseNumber: "Hausnummer",
        postalCode: "Postleitzahl",
        city: "Stadt",
        country: "Land",
        paymentMethod: "Zahlungsmethode",
        placeOrder: "Bestellung aufgeben",
        
        // Shipping
        shippingNetherlands: "Niederlande",
        shippingBelgium: "Belgien",
        shippingGermany: "Deutschland",
        shippingFrance: "Frankreich",
        shippingEU: "Ãœbriges EU",
        shippingWorldwide: "Weltweit",
        freeFrom: "Kostenlos ab",
        deliveryDays: "Werktage",
        
        // Footer
        footerAbout: "NiederlÃ¤ndische Blumenzwiebeln direkt von lokalen ZÃ¼chtern aus der Bollenstreek in Ihren Garten.",
        allProducts: "Alle Produkte",
        aboutUs: "Ãœber Uns",
        
        // Blog
        blogTitle: "Blog & Pflanztipps",
        blogSubtitle: "Tipps, Tricks und Anleitungen fÃ¼r den Anbau schÃ¶ner Blumenzwiebeln",
        howToPlant: "Wie pflanze ich",
        seasonCalendar: "Saisonkalender",
        videoTutorials: "Video-Tutorials",
        readMore: "Weiterlesen",
        
        // Map
        mapTitle: "Interaktive Karte",
        filterGrowers: "Blumenzwiebel-ZÃ¼chter",
        filterExperiences: "AktivitÃ¤ten & Erlebnisse",
        filterPlaces: "Orte",
        planRoute: "Route planen",
        
        // Bloom status
        nowBlooming: "Jetzt blÃ¼hend",
        bestTimeToVisit: "Beste Besuchszeit",
        bloomingPeriod: "BlÃ¼tezeit",
        
        // General
        since: "Seit",
        moreInfo: "Mehr Info",
        visitWebsite: "Website besuchen",
        close: "SchlieÃŸen"
    },
    
    fr: {
        // Header
        home: "Accueil",
        webshop: "Boutique",
        ourGrowers: "Nos Producteurs",
        theBollenstreek: "La Bollenstreek",
        experiences: "ExpÃ©riences",
        contact: "Contact",
        blog: "Blog",
        searchPlaceholder: "Rechercher des bulbes...",
        
        // Hero
        heroTitle: "Bulbes de Fleurs Hollandais<br>Directement du Producteur",
        heroSubtitle: "DÃ©couvrez les magnifiques bulbes de fleurs de la Bollenstreek. Nous vous connectons directement aux producteurs locaux pour la meilleure qualitÃ©.",
        viewCollection: "Voir la Collection",
        meetGrowers: "Rencontrer les Producteurs",
        
        // Products
        addToCart: "Ajouter au Panier",
        bulbs: "bulbes",
        inStock: "En stock",
        outOfStock: "Ã‰puisÃ©",
        perPiece: "par piÃ¨ce",
        
        // Cart
        cart: "Panier",
        subtotal: "Sous-total",
        shipping: "Livraison",
        total: "Total",
        checkout: "Commander",
        freeShipping: "Livraison gratuite dÃ¨s 50â‚¬",
        emptyCart: "Votre panier est vide",
        
        // Checkout
        deliveryAddress: "Adresse de Livraison",
        firstName: "PrÃ©nom",
        lastName: "Nom",
        email: "Adresse e-mail",
        phone: "NumÃ©ro de tÃ©lÃ©phone",
        street: "Rue",
        houseNumber: "NumÃ©ro",
        postalCode: "Code Postal",
        city: "Ville",
        country: "Pays",
        paymentMethod: "Mode de Paiement",
        placeOrder: "Passer la Commande",
        
        // Shipping
        shippingNetherlands: "Pays-Bas",
        shippingBelgium: "Belgique",
        shippingGermany: "Allemagne",
        shippingFrance: "France",
        shippingEU: "Autre UE",
        shippingWorldwide: "Monde entier",
        freeFrom: "Gratuit dÃ¨s",
        deliveryDays: "jours ouvrables",
        
        // Footer
        footerAbout: "Bulbes de fleurs hollandais directement des producteurs locaux de la Bollenstreek vers votre jardin.",
        allProducts: "Tous les Produits",
        aboutUs: "Ã€ Propos",
        
        // Blog
        blogTitle: "Blog & Conseils de Plantation",
        blogSubtitle: "Conseils, astuces et guides pour cultiver de beaux bulbes de fleurs",
        howToPlant: "Comment planter",
        seasonCalendar: "Calendrier Saisonnier",
        videoTutorials: "Tutoriels VidÃ©o",
        readMore: "Lire la suite",
        
        // Map
        mapTitle: "Carte Interactive",
        filterGrowers: "Producteurs de Bulbes",
        filterExperiences: "ActivitÃ©s & ExpÃ©riences",
        filterPlaces: "Lieux",
        planRoute: "Planifier l'ItinÃ©raire",
        
        // Bloom status
        nowBlooming: "En floraison",
        bestTimeToVisit: "Meilleur moment pour visiter",
        bloomingPeriod: "PÃ©riode de floraison",
        
        // General
        since: "Depuis",
        moreInfo: "Plus d'infos",
        visitWebsite: "Visiter le Site",
        close: "Fermer"
    }
};

// Internationale verzendkosten
const internationalShipping = {
    NL: { name: "Nederland", price: 6.95, freeFrom: 50, deliveryDays: "2-3", zone: "domestic" },
    BE: { name: "BelgiÃ«", price: 9.95, freeFrom: 75, deliveryDays: "3-5", zone: "benelux" },
    DE: { name: "Duitsland", price: 12.95, freeFrom: 100, deliveryDays: "4-6", zone: "eu" },
    FR: { name: "Frankrijk", price: 14.95, freeFrom: 100, deliveryDays: "5-7", zone: "eu" },
    AT: { name: "Oostenrijk", price: 14.95, freeFrom: 100, deliveryDays: "5-7", zone: "eu" },
    IT: { name: "ItaliÃ«", price: 16.95, freeFrom: 125, deliveryDays: "6-8", zone: "eu" },
    ES: { name: "Spanje", price: 16.95, freeFrom: 125, deliveryDays: "6-8", zone: "eu" },
    PT: { name: "Portugal", price: 18.95, freeFrom: 125, deliveryDays: "7-10", zone: "eu" },
    PL: { name: "Polen", price: 14.95, freeFrom: 100, deliveryDays: "5-7", zone: "eu" },
    CZ: { name: "TsjechiÃ«", price: 14.95, freeFrom: 100, deliveryDays: "5-7", zone: "eu" },
    DK: { name: "Denemarken", price: 14.95, freeFrom: 100, deliveryDays: "4-6", zone: "eu" },
    SE: { name: "Zweden", price: 18.95, freeFrom: 125, deliveryDays: "6-8", zone: "eu" },
    FI: { name: "Finland", price: 19.95, freeFrom: 150, deliveryDays: "7-10", zone: "eu" },
    IE: { name: "Ierland", price: 16.95, freeFrom: 125, deliveryDays: "5-7", zone: "eu" },
    LU: { name: "Luxemburg", price: 9.95, freeFrom: 75, deliveryDays: "3-5", zone: "benelux" },
    GB: { name: "Verenigd Koninkrijk", price: 24.95, freeFrom: 200, deliveryDays: "7-12", zone: "world" },
    CH: { name: "Zwitserland", price: 29.95, freeFrom: 200, deliveryDays: "7-10", zone: "world" },
    US: { name: "Verenigde Staten", price: 39.95, freeFrom: null, deliveryDays: "10-15", zone: "world" },
    CA: { name: "Canada", price: 39.95, freeFrom: null, deliveryDays: "10-15", zone: "world" },
    AU: { name: "AustraliÃ«", price: 49.95, freeFrom: null, deliveryDays: "14-21", zone: "world" },
    JP: { name: "Japan", price: 44.95, freeFrom: null, deliveryDays: "10-14", zone: "world" }
};

// Language management
let currentLanguage = 'nl';

function detectLanguage() {
    // Check localStorage first
    const savedLang = localStorage.getItem('bollenstreekLanguage');
    if (savedLang && translations[savedLang]) {
        return savedLang;
    }
    
    // Check browser language
    const browserLang = navigator.language.substring(0, 2).toLowerCase();
    if (translations[browserLang]) {
        return browserLang;
    }
    
    return 'nl'; // Default to Dutch
}

function setLanguage(lang) {
    if (!translations[lang]) return;
    
    currentLanguage = lang;
    localStorage.setItem('bollenstreekLanguage', lang);
    
    // Update all translatable elements
    document.querySelectorAll('[data-translate]').forEach(el => {
        const key = el.getAttribute('data-translate');
        if (translations[lang][key]) {
            if (el.tagName === 'INPUT' && el.hasAttribute('placeholder')) {
                el.placeholder = translations[lang][key];
            } else {
                el.innerHTML = translations[lang][key];
            }
        }
    });
    
    // Update language switcher active state
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
    });
    
    // Dispatch event for other scripts
    document.dispatchEvent(new CustomEvent('languageChanged', { detail: { language: lang } }));
}

function t(key) {
    return translations[currentLanguage][key] || translations['nl'][key] || key;
}

function getShippingCost(countryCode, orderTotal) {
    const country = internationalShipping[countryCode] || internationalShipping['NL'];
    
    if (country.freeFrom && orderTotal >= country.freeFrom) {
        return 0;
    }
    
    return country.price;
}

function getShippingInfo(countryCode) {
    return internationalShipping[countryCode] || internationalShipping['NL'];
}

// Initialize on load
document.addEventListener('DOMContentLoaded', function() {
    currentLanguage = detectLanguage();
    
    // Create language switcher if not exists
    const header = document.querySelector('.header-actions');
    if (header && !document.querySelector('.language-switcher')) {
        const switcher = document.createElement('div');
        switcher.className = 'language-switcher';
        switcher.innerHTML = `
            <button class="lang-btn ${currentLanguage === 'nl' ? 'active' : ''}" data-lang="nl" onclick="setLanguage('nl')">ðŸ‡³ðŸ‡±</button>
            <button class="lang-btn ${currentLanguage === 'en' ? 'active' : ''}" data-lang="en" onclick="setLanguage('en')">ðŸ‡¬ðŸ‡§</button>
            <button class="lang-btn ${currentLanguage === 'de' ? 'active' : ''}" data-lang="de" onclick="setLanguage('de')">ðŸ‡©ðŸ‡ª</button>
            <button class="lang-btn ${currentLanguage === 'fr' ? 'active' : ''}" data-lang="fr" onclick="setLanguage('fr')">ðŸ‡«ðŸ‡·</button>
        `;
        header.insertBefore(switcher, header.firstChild);
    }
    
    // Apply translations
    setLanguage(currentLanguage);
});
